IP协议

![](images04/01-01.jpg)

## 1、IP即网际协议

### 1、IP相当于OSI参考模型的第3层

```
IP(IPv4、IPv6)相当于OSI参考模型中的第三层——网络层。
网络层的主要作用是"实现终端节点之间的通信"。这种终端节点之间的通信也叫"点对点通信(end to end)"。

从前面的章节可知，网络层的下一层————数据链路层的主要作用是在互连同一种数据链路的节点之间进行包传递。而一旦跨越多种数据链路，就需要借助网络层。网络层可以跨越不同的数据链路，即使是在不同的数据链路上也能实现两端节点之间的数据包传输。
```

![](images04/01-02.jpg)

```
主机与节点

在互联网世界中，将那些配有IP地址的设备叫做"主机"。这里的主机可以是超大型计算机，也可以是小型计算机。这是因为互联网在当初刚发明的时候，只能连接这类大型的设备，因此习惯上就将配有 IP 地址的设备称为"主机"。

然而，准确的说，主机的定义应该是指"配置有IP地址，但是不进行路由控制的设备"。
既配有IP地址又具有路由控制能力的设备叫做"路由器"，跟主机有所区别。而节点则是主机和路由器的统称。
```

### 2、网络层用户数据链路层的关系

```
数据链路层提供直连两个设备之间的通信功能。与之相比，作为网络层的IP则负责在没有直连的两个网络之间进行通信传输。
```

## 2、IP基础知识

```
IP大致分为三大作用模块，他们是IP寻址、路由以及IP分包与组包。
```

### 1、IP地址属于网络层地址

```
在计算机通信中，为了识别通信对端，必须要有一个类似于地址的识别码进行标识。
MAC地址用来标识同一个链路中不同计算机的一种识别码。
IP地址用于在"连接到网路中的所有主机中识别出进行通信的目标地址"。因此，在TCP/IP通信中所有主机或路由器必须设定自己的IP地址。
```

```
不论一台主机与那种数据链路链接，其IP地址的形式都保持不变。
另外，在网桥或交换集线器等物理层或数据链路层数据包转发设备中，不需要设置IP地址。因为这些设备只负责将IP包转化为 0、1 比特流转发或对数据链路帧的数据部分进行转发，而不需要应对IP协议。
```

### 2、路由控制

```
路由控制(Routing)是指将分组数据发送到最终目标地址的功能。即使网络非常复杂，也可以通过路由控制确定到达目标地址的通路。一旦这个路由控制的运行出现异常，分组数据极有可能"迷失"，无法达到目标地址。因此，一个数据包之所以能够成功的到达最终的目标地址，全靠路由控制。
```

![](images04/01-03.jpg)

#### 1、发送数据至最终目标地址

```
Hop 译为中文叫"跳"。它是指网络中的一个区间。IP包正是在网络中一个个跳间被转发。因此IP路由也叫做多跳路由。在每一个区间内决定着包在下一跳被转发的路径。
```

![](images04/01-04.jpg)

```
一跳的范围
一跳(1 Hop)是指利用数据链路层以下分层的功能传输数据帧的一个区间。
	以太网等数据链路中使用MAC地址传输数据帧。此时的一跳是指从源MAC地址到目标MAC地址之间传输帧的区间。也就是说它是主机或路由器网卡不经其他路由器而能直接到达的相邻主机或路由器网卡之间的一个区间。在一跳这个区间内，电缆可以通过网桥或交换集线器相连，不会通过路由器或网关相连。
```

```
多跳路由是指路由器或主机在转发IP数据包时只指定下一个路由器或主机，而不是将到最终目标地址为止的所有通路全部指定出来。
```













